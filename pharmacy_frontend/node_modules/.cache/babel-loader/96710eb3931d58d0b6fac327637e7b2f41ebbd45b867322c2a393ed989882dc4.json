{"ast":null,"code":"import { IconUser } from \"@arco-design/web-vue/es/icon\";\nimport { useRoute } from \"vue-router\";\nimport { onMounted, ref, watch } from \"vue\";\nexport default {\n  name: \"AdminInfo\",\n  components: {\n    IconUser\n  },\n  setup() {\n    const route = useRoute();\n    const accout = ref(route.query.AdminId);\n    const selectedKeys = ref([]);\n    const rowSelection = ref({\n      type: \"checkbox\",\n      showCheckedAll: true,\n      onlyCurrent: true\n    });\n    const pagination = {\n      pageSize: 5\n    };\n    const columns = [{\n      title: \"药品名称\",\n      dataIndex: \"medicineName\"\n    }, {\n      title: \"药品序号\",\n      dataIndex: \"m_id\",\n      sortable: {\n        sortDirections: [\"ascend\", \"descend\"]\n      }\n    }, {\n      title: \"药品库存\",\n      dataIndex: \"m_amount\",\n      sortable: {\n        sortDirections: [\"ascend\", \"descend\"]\n      }\n    }, {\n      title: \"药品有效期\",\n      dataIndex: \"m_expire\",\n      sortable: {\n        sortDirections: [\"ascend\", \"descend\"]\n      }\n    }];\n    const data = ref([]);\n    const visibleofAdd = ref(false);\n    const visibleofEdit = ref(false);\n    const visibleofDelete = ref(false);\n    const showEditButtons = ref(false);\n    const showDeleteButtons = ref(false);\n    const handleAdd = () => {\n      visibleofAdd.value = true;\n    };\n    const handleOk = () => {\n      visibleofAdd.value = false;\n    };\n    const handleCancel = () => {\n      visibleofAdd.value = false;\n    };\n    const handleDelete = () => {\n      visibleofDelete.value = true;\n    };\n    const handleEdit = () => {\n      visibleofEdit.value = true;\n    };\n    const form = ref({\n      medicineName: \"\",\n      medicineAmount: \"\",\n      medicineExpire: \"\",\n      medicinePrice: \"\",\n      medicineType: \"\",\n      medicineDesc: \"\",\n      medicinePic: \"\",\n      medicineId: \"\"\n    });\n    const options = ref([\"奥利司他胶囊\", \"杰士邦\", \"杜蕾斯\"]);\n    const handleSubmit = data => {\n      data.value = data;\n      // TODO: 把数据提交到后端和数据库\n    };\n\n    watch(selectedKeys, newSelectedKeys => {\n      selectedKeys.value = newSelectedKeys;\n      console.log(selectedKeys.value);\n      if (newSelectedKeys.length === 1) {\n        showEditButtons.value = true;\n        showDeleteButtons.value = true;\n      } else if (newSelectedKeys.length > 1) {\n        showDeleteButtons.value = true;\n        showEditButtons.value = false;\n      } else {\n        showDeleteButtons.value = false;\n        showEditButtons.value = false;\n      }\n    });\n    onMounted(() => {\n      accout.value = route.query.AdminId;\n      data.value = [\n      //示例:\n      {\n        medicineName: \"阿莫西林\",\n        m_id: 2,\n        m_amount: 10,\n        m_expire: \"2023-01-01\"\n      }, {\n        medicineName: \"阿莫西林2\",\n        m_id: 1,\n        m_amount: 100,\n        m_expire: \"2022-09-01\"\n      }, {\n        medicineName: \"阿莫西林3\",\n        m_id: 4,\n        m_amount: 10,\n        m_expire: \"2022-01-31\"\n      }, {\n        medicineName: \"阿莫西林4\",\n        m_id: 3,\n        m_amount: 10,\n        m_expire: \"1990-01-01\"\n      }\n      //TODO: 从数据库获取数据\n      ];\n      // showDeleteAndEditButtons();\n      console.log(\"SELECTED:\");\n      console.log(selectedKeys.value);\n    });\n    return {\n      accout,\n      data,\n      columns,\n      visibleofAdd,\n      visibleofDelete,\n      visibleofEdit,\n      handleAdd,\n      handleCancel,\n      handleDelete,\n      handleEdit,\n      handleOk,\n      form,\n      handleSubmit,\n      options,\n      rowSelection,\n      selectedKeys,\n      pagination,\n      showEditButtons,\n      showDeleteButtons\n      // showDeleteAndEditButtons,\n    };\n  }\n};","map":{"version":3,"names":["IconUser","useRoute","onMounted","ref","watch","name","components","setup","route","accout","query","AdminId","selectedKeys","rowSelection","type","showCheckedAll","onlyCurrent","pagination","pageSize","columns","title","dataIndex","sortable","sortDirections","data","visibleofAdd","visibleofEdit","visibleofDelete","showEditButtons","showDeleteButtons","handleAdd","value","handleOk","handleCancel","handleDelete","handleEdit","form","medicineName","medicineAmount","medicineExpire","medicinePrice","medicineType","medicineDesc","medicinePic","medicineId","options","handleSubmit","newSelectedKeys","console","log","length","m_id","m_amount","m_expire"],"sources":["/Users/alanzeng/Documents/GitHub/SE_Pharmacy/pharmacy_frontend/src/views/Admin/Administer.vue"],"sourcesContent":["<template>\n  <a-space>\n    <a-avatar :style=\"{ backgroundColor: '#3370ff' }\">\n      <IconUser />\n    </a-avatar>\n    <a-space>\n      <h1>管理员ID: {{ accout }}</h1>\n      <a-button type=\"primary\">\n        <router-link to=\"/home\">退出登陆</router-link>\n      </a-button>\n    </a-space>\n    <a-space\n      :style=\"{\n        width: '320px',\n        display: 'flex',\n        justifyContent: 'space-between',\n        right: '20px',\n        position: 'fixed',\n      }\"\n    >\n      <a-button\n        :style=\"{ position: absolute }\"\n        type=\"primary\"\n        @click=\"handleAdd\"\n      >\n        添加药品\n      </a-button>\n      <!-- <div v-if=\"showButtons\">\n        \n      </div> -->\n\n      <a-button v-if=\"showDeleteButtons\" type=\"primary\" @click=\"handleDelete\"\n        >删除药品</a-button\n      >\n    </a-space>\n    <!-- 添加药品 -->\n    <a-modal\n      v-model:visible=\"visibleofAdd\"\n      @submit=\"handleSubmit\"\n      @cancel=\"handleCancel\"\n    >\n      <template #title> 添加药品 </template>\n      <a-form :model=\"form\" :style=\"{ width: '100%' }\">\n        <a-form-item field=\"medicineName\" label=\"药品名称\">\n          <a-select\n            :options=\"options\"\n            :style=\"{ width: '100%' }\"\n            placeholder=\"请选择要添加的药品\"\n            :allow-search=\"{ retainInputValue: true }\"\n          />\n        </a-form-item>\n        <a-form-item field=\"medicineAmount\" label=\"药品数量\">\n          <a-input v-model=\"form.medicneAmount\" placeholder=\"请输入药品数量\" />\n        </a-form-item>\n        <a-form-item field=\"medicineExpired\" label=\"药品有效期\">\n          <a-date-picker style=\"width: 200px\" />\n        </a-form-item>\n      </a-form>\n    </a-modal>\n    <!-- 修改药品 -->\n    <a-modal\n      v-model:visible=\"visibleofEdit\"\n      @submit=\"handleSubmit\"\n      @cancel=\"handleCancel\"\n    >\n      <template #title> 修改药品 </template>\n      <a-form :model=\"form\" :style=\"{ width: '100%' }\">\n        <a-form-item field=\"medicineName\" label=\"药品名称\">\n          {{ selectedKeys[0] }}\n          <!-- 固定值，为选中的那一项 -->\n        </a-form-item>\n        <a-form-item field=\"medicineAmount\" label=\"药品数量\">\n          <a-input v-model=\"form.medicneAmount\" placeholder=\"请输入药品数量\" />\n        </a-form-item>\n        <a-form-item field=\"medicineExpired\" label=\"药品有效期\">\n          <a-date-picker style=\"width: 200px\" />\n        </a-form-item>\n      </a-form>\n    </a-modal>\n    <!-- 删除药品 -->\n    <a-modal\n      v-model:visible=\"visibleofDelete\"\n      @submit=\"handleSubmit\"\n      @cancel=\"handleCancel\"\n    >\n      <template #title> 删除药品 </template>\n      确认删除\n    </a-modal>\n  </a-space>\n  <!-- 表格 -->\n  <a-table\n    row-key=\"medicineName\"\n    v-model:selectedKeys=\"selectedKeys\"\n    :pagination=\"pagination\"\n    :columns=\"columns\"\n    :row-selection=\"rowSelection\"\n    :data=\"data\"\n  />\n</template>\n\n<script>\nimport { IconUser } from \"@arco-design/web-vue/es/icon\";\nimport { useRoute } from \"vue-router\";\nimport { onMounted, ref, watch } from \"vue\";\n\nexport default {\n  name: \"AdminInfo\",\n  components: {\n    IconUser,\n  },\n  setup() {\n    const route = useRoute();\n    const accout = ref(route.query.AdminId);\n    const selectedKeys = ref([]);\n    const rowSelection = ref({\n      type: \"checkbox\",\n      showCheckedAll: true,\n      onlyCurrent: true,\n    });\n    const pagination = { pageSize: 5 };\n    const columns = [\n      {\n        title: \"药品名称\",\n        dataIndex: \"medicineName\",\n      },\n      {\n        title: \"药品序号\",\n        dataIndex: \"m_id\",\n        sortable: {\n          sortDirections: [\"ascend\", \"descend\"],\n        },\n      },\n      {\n        title: \"药品库存\",\n        dataIndex: \"m_amount\",\n        sortable: {\n          sortDirections: [\"ascend\", \"descend\"],\n        },\n      },\n      {\n        title: \"药品有效期\",\n        dataIndex: \"m_expire\",\n        sortable: {\n          sortDirections: [\"ascend\", \"descend\"],\n        },\n      },\n    ];\n    const data = ref([]);\n    const visibleofAdd = ref(false);\n    const visibleofEdit = ref(false);\n    const visibleofDelete = ref(false);\n    const showEditButtons = ref(false);\n    const showDeleteButtons = ref(false);\n\n    const handleAdd = () => {\n      visibleofAdd.value = true;\n    };\n    const handleOk = () => {\n      visibleofAdd.value = false;\n    };\n    const handleCancel = () => {\n      visibleofAdd.value = false;\n    };\n\n    const handleDelete = () => {\n      visibleofDelete.value = true;\n    };\n\n    const handleEdit = () => {\n      visibleofEdit.value = true;\n    };\n    const form = ref({\n      medicineName: \"\",\n      medicineAmount: \"\",\n      medicineExpire: \"\",\n      medicinePrice: \"\",\n      medicineType: \"\",\n      medicineDesc: \"\",\n      medicinePic: \"\",\n      medicineId: \"\",\n    });\n\n    const options = ref([\"奥利司他胶囊\", \"杰士邦\", \"杜蕾斯\"]);\n\n    const handleSubmit = (data) => {\n      data.value = data;\n      // TODO: 把数据提交到后端和数据库\n    };\n\n    watch(selectedKeys, (newSelectedKeys) => {\n      selectedKeys.value = newSelectedKeys;\n      console.log(selectedKeys.value);\n      if (newSelectedKeys.length === 1) {\n        showEditButtons.value = true;\n        showDeleteButtons.value = true;\n      } else if (newSelectedKeys.length > 1) {\n        showDeleteButtons.value = true;\n        showEditButtons.value = false;\n      } else {\n        showDeleteButtons.value = false;\n        showEditButtons.value = false;\n      }\n    });\n\n    onMounted(() => {\n      accout.value = route.query.AdminId;\n      data.value = [\n        //示例:\n        {\n          medicineName: \"阿莫西林\",\n          m_id: 2,\n          m_amount: 10,\n          m_expire: \"2023-01-01\",\n        },\n        {\n          medicineName: \"阿莫西林2\",\n          m_id: 1,\n          m_amount: 100,\n          m_expire: \"2022-09-01\",\n        },\n        {\n          medicineName: \"阿莫西林3\",\n          m_id: 4,\n          m_amount: 10,\n          m_expire: \"2022-01-31\",\n        },\n        {\n          medicineName: \"阿莫西林4\",\n          m_id: 3,\n          m_amount: 10,\n          m_expire: \"1990-01-01\",\n        },\n        //TODO: 从数据库获取数据\n      ];\n      // showDeleteAndEditButtons();\n      console.log(\"SELECTED:\");\n      console.log(selectedKeys.value);\n    });\n\n    return {\n      accout,\n      data,\n      columns,\n      visibleofAdd,\n      visibleofDelete,\n      visibleofEdit,\n      handleAdd,\n      handleCancel,\n      handleDelete,\n      handleEdit,\n      handleOk,\n      form,\n      handleSubmit,\n      options,\n      rowSelection,\n      selectedKeys,\n      pagination,\n      showEditButtons,\n      showDeleteButtons,\n      // showDeleteAndEditButtons,\n    };\n  },\n};\n</script>\n\n<style scoped></style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}